(function(a){a.fn.dPassword=function(f){var e={interval:100,duration:1e3,replacement:"%u25CF",prefix:"password_",debug:false},b=a.extend(e,f),c=[],d=[];a(this).each(function(){b.debug&&console.log("init ["+a(this).attr("id")+"]");var l=a(this).attr("name"),e=a(this).attr("id"),h=a(this).attr("class"),k=a(this).attr("style"),m=a(this).attr("size"),g=a(this).attr("maxlength"),i=a(this).attr("disabled"),j=a(this).attr("tabindex"),f=a(this).attr("accesskey"),n=a(this).attr("value");c.push(e);d.push(e);a(this).hide();b.debug&&a(this).after('<span id="debug_'+b.prefix+l+'" style="color: #f00;"></span>');a(this).after(' <input name="'+(b.prefix+l)+'" id="'+(b.prefix+e)+'" type="text" value="'+n+'" '+(h!=""?'class="'+h+'"':"")+(k!=""?'style="'+k+'"':"")+(m!=""?'size="'+m+'"':"")+(g!=-1?'maxlength="'+g+'"':"")+(i!=""?'disabled="'+i+'"':"")+(j!=""?'tabindex="'+j+'"':"")+(f!=undefined?'accesskey="'+f+'"':"")+'autocomplete="off" />');a("label[for="+e+"]").attr("for",b.prefix+e);a(this).attr("tabindex","");a(this).attr("accesskey","");a("#"+b.prefix+e).bind("focus",function(){b.debug&&console.log("event: focus ["+getId(a(this).attr("id"))+"]");clearTimeout(c[getId(a(this).attr("id"))]);c[getId(a(this).attr("id"))]=setTimeout("check('"+getId(a(this).attr("id"))+"', '')",b.interval)});a("#"+b.prefix+e).bind("blur",function(){b.debug&&console.log("event: blur ["+getId(a(this).attr("id"))+"]");clearTimeout(c[getId(a(this).attr("id"))])});setTimeout("check('"+e+"', '', true);",b.interval)});getId=function(a){var c=b.prefix+"(.*)",d=new RegExp(c);d.exec(a);a=RegExp.$1;return a};setPassword=function(e,d){b.debug&&console.log("setPassword: ["+e+"]");var c="";for(i=0;i<d.length;i++)if(d.charAt(i)==unescape(b.replacement))c=c+a("#"+e).val().charAt(i);else c=c+d.charAt(i);a("#"+e).val(c)};check=function(e,j,h){b.debug&&console.log("check: ["+e+"]");var f=a("#"+b.prefix+e).val();if(j!=f){setPassword(e,f);if(f.length>1){var g="";for(i=0;i<f.length-1;i++)g=g+unescape(b.replacement);g=g+f.charAt(f.length-1);a("#"+b.prefix+e).val(g)}clearTimeout(d[e]);d[e]=setTimeout("convertLastChar('"+e+"')",b.duration)}b.debug&&a("#debug_"+b.prefix+e).text(a("#"+e).val());if(!h)c[e]=setTimeout("check('"+e+"', '"+a("#"+b.prefix+e).val()+"', false)",b.interval)};convertLastChar=function(d){if(a("#"+b.prefix+d).val()!=""){var c="";for(i=0;i<a("#"+b.prefix+d).val().length;i++)c=c+unescape(b.replacement);a("#"+b.prefix+d).val(c)}}}})(jQuery)